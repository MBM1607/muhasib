#:kivy 1.11.1

#:import SECONDRY_COLOR constants.SECONDRY_COLOR
#:import PRAYER_NAMES constants.PRAYER_NAMES

<SettingsScreen>:
	settings_list: settings_list
	name: "settings"
	BoxLayout:
		orientation: "vertical"
		spacing: dp(10)
		ScreenActionBar:
			text: "Settings"
		CustomRecycleView:
			id: settings_list
			size_hint_y: 0.9
			viewclass: "SettingsButton"
			VerticalListLayout:
				padding: 0

<SettingsButton>:
	background_color: SECONDRY_COLOR

<SettingTextButton>:
	size_hint_y: None
	height: dp(48)
	background_color: SECONDRY_COLOR

<SettingsPopup>:
	size_hint: 0.9, 0.9
	CustomRecycleView:
		viewclass: "SettingPopupButton"
		data: root.data
		VerticalListLayout:

<ManualTimesPopup>:
	BoxLayout:
		orientation: "vertical"
		spacing: dp(5)
		CustomActionBar:
			IconButton:
				icon: "data/back.png"
				on_press: root.dismiss()
			Label:
				text: "Manual Times Adjustments"
				font_size: sp(15)
		CustomRecycleView:
			viewclass: "ManualTimesButton"
			data: [{"text": text} for text in PRAYER_NAMES]
			VerticalListLayout:
				padding: 0

<PrayerRecordSettings>:
	BoxLayout:
		orientation: "vertical"
		spacing: dp(5)
		CustomActionBar:
			IconButton:
				icon: "data/back.png"
				on_press: root.dismiss()
			Label:
				text: "Prayer Record Settings"
				font_size: sp(15)
		CustomRecycleView:
			viewclass: "RecordSettingButton"
			data: [{"text": "Fasting Record", "name": "fasting_record"}, {"text": "Quran Study Record", "name": "quran_record"}, {"text": "Hadees Study Record", "name": "hadees_record"}]
			VerticalListLayout:
				padding: 0

<PrayerTimeSettings>:
	BoxLayout:
		orientation: "vertical"
		spacing: dp(5)
		CustomActionBar:
			IconButton:
				icon: "data/back.png"
				on_press: root.dismiss()
			Label:
				text: "Prayer Times Settings"
				font_size: sp(15)
		ScrollView:
			do_scroll_x: False
			scroll_type: ["content", "bars"]
			bar_color: 0, 0, 0, 1
			BoxLayout:
				orientation: "vertical"
				size_hint_y: None
				height: dp(512)
				spacing: dp(10)
				LabelCheckBox:
					name: "Show Imsak Time"
					active: app.settings["show_imsak_time"]
					on_active: app.settings["show_imsak_time"] = self.active
				SettingTextButton:
					text: "Time Format"
					on_press: root.open_popup("time_format")
				SettingTextButton:
					text: "Prayer Method"
					on_press: root.open_popup("calc_method")
				SettingTextButton:
					text: "Asr Method"
					on_press: root.open_popup("asr_factor")
				SettingTextButton:
					text: "High Latitude Method"
					on_press: root.open_popup("high_lats")
				SettingTextButton:
					text: "Imsak Offset"
					on_press: root.open_popup("imsak_offset")
				SettingTextButton:
					text: "Dhuhr Offset"
					on_press: root.open_popup("dhuhr_offset")
				SettingTextButton:
					text: "Jummah Offset"
					on_press: root.open_popup("jummah_offset")
				SettingTextButton:
					text: "Manual Corrections"
					on_press: root.manual_times_popup_open()